!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).consola=e()}(this,function(){"use strict";var t={fatal:{level:0},error:{level:0},warn:{level:1},log:{level:2},info:{level:3},success:{level:3},debug:{level:4},trace:{level:5},silent:{level:1/0},ready:{level:3},start:{level:3}};function e(t){return e=t,"[object Object]"===Object.prototype.toString.call(e)&&(!(!t.message&&!t.args)&&!t.stack);var e}let s=!1;const r=[];class o{constructor(e={}){this._reporters=e.reporters||[],this._types=e.types||t,this._level=null!=e.level?e.level:3,this._defaults=e.defaults||{},this._async=void 0!==e.async?e.async:null,this._stdout=e.stdout,this._stderr=e.stdout,this._mockFn=e.mockFn;for(const t in this._types)this[t]=this._wrapLogFn(Object.assign({type:t},this._types[t],this._defaults));this._mockFn&&this.mockTypes()}get level(){return this._level}set level(t){let e=0,s=0;for(const t in this._types){const r=this._types[t];r.level>s?s=r.level:r.level<e&&(e=r.level)}this._level=Math.min(s,Math.max(e,t))}get stdout(){return this._stdout||console._stdout}get stderr(){return this._stderr||console._stderr}create(t){return new o(Object.assign({reporters:this._reporters,level:this._level,types:this._types,defaults:this._defaults,stdout:this._stdout,stderr:this._stderr,mockFn:this._mockFn},t))}withDefaults(t){return this.create({defaults:Object.assign({},this._defaults,t)})}withTag(t){return this.withDefaults({tag:this._defaults.tag?this._defaults.tag+":"+t:t})}addReporter(t){return this._reporters.push(t),this}removeReporter(t){if(t){const e=this._reporters.indexOf(t);if(e>=0)return this._reporters.splice(e,1)}else this._reporters.splice(0);return this}setReporters(t){return this._reporters=Array.isArray(t)?t:[t],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const t in this._types)console["__"+t]||(console["__"+t]=console[t]),console[t]=this[t]}restoreConsole(){for(const t in this._types)console["__"+t]&&(console[t]=console["__"+t],delete console["__"+t])}wrapStd(){this._wrapStream(this.stdout,"log"),this._wrapStream(this.stderr,"log")}_wrapStream(t,e){t&&(t.__write||(t.__write=t.write),t.write=(t=>{this[e](String(t).trim())}))}restoreStd(){this._restoreStream(this.stdout),this._restoreStream(this.stderr)}_restoreStream(t){t&&t.__write&&(t.write=t.__write,delete t.__write)}pauseLogs(){s=!0}resumeLogs(){s=!1;const t=r.splice(0);for(const e of t)e[0]._logFn(e[1],e[2])}mockTypes(t){if(this._mockFn=t||this._mockFn,"function"==typeof this._mockFn)for(const t in this._types)this[t]=this._mockFn(t,this._types[t])||this[t]}_wrapLogFn(t){return function(){if(!s)return this._logFn(t,arguments);r.push([this,t,arguments])}.bind(this)}_logFn(t,s){if(t.level>this._level)return!!this._async&&Promise.resolve(!1);const r=Object.assign({date:new Date,args:[]},t);if(1===s.length&&e(s[0])?Object.assign(r,s[0]):r.args=Array.from(s),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),this._async)return this._logAsync(r);this._log(r)}_log(t){for(const e of this._reporters)e.log(t,{async:!1,stdout:this.stdout,stderr:this.stderr})}_logAsync(t){return Promise.all(this._reporters.map(e=>e.log(t,{async:!0,stdout:this.stdout,stderr:this.stderr})))}}o.prototype.add=o.prototype.addReporter,o.prototype.remove=o.prototype.removeReporter,o.prototype.clear=o.prototype.removeReporter,o.prototype.withScope=o.prototype.withTag,o.prototype.mock=o.prototype.mockTypes,o.prototype.pause=o.prototype.pauseLogs,o.prototype.resume=o.prototype.resumeLogs;const i={info:"cyan"},l={0:"red",1:"yellow",2:"white",3:"green"};class n{constructor(t){this.options=Object.assign({},t)}log(t){const e=t.level<1?console.__error||console.error:console.__log||console.log,s="log"!==t.type?`[${t.type.toUpperCase()}]`:"",r=t.tag?`[${t.tag.toUpperCase()}]`:"",o=`[${new Date(t.date).toLocaleTimeString()}]`,n=`color: ${i[t.type]||l[t.level]}; background-color: inherit;`;e("%c"+o+r+"%c"+s,`color: ${t.additionalColor||"grey"}; background-color: inherit;`,n,...t.args)}}return"undefined"!=typeof window&&window.consola||function(){const t=new o({reporters:[new n]});return t.Consola=o,t.BrowserReporter=n,t}()});
